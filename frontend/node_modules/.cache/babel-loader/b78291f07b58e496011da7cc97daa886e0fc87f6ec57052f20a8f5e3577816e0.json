{"ast":null,"code":"const csrfToken = localStorage.getItem(\"csrfToken\");\nexport async function login(data) {\n  const response = await fetch(\"http://localhost:8080/auth/login\", {\n    body: JSON.stringify(data),\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  if (response.status !== 200) {\n    throw new Error(\"Not logged in\");\n  }\n  return response.json();\n}\nexport async function getCurrentUser() {\n  const response = await fetch(\"http://localhost:8080/auth/user\", {\n    credentials: \"include\"\n  });\n  if (response.status !== 200) {\n    throw new Error(\"Not logged in\");\n  }\n  return response.json();\n}\nexport async function logout() {\n  return await fetch(\"http://localhost:8080/logout\", {\n    credentials: \"include\"\n  });\n}","map":{"version":3,"names":["csrfToken","localStorage","getItem","login","data","response","fetch","body","JSON","stringify","credentials","method","headers","status","Error","json","getCurrentUser","logout"],"sources":["/home/ndumicic/Desktop/web2/web2security/frontend/src/api/auth.tsx"],"sourcesContent":["import {UserLogin} from \"../model/UserLogin\";\n\nconst csrfToken = localStorage.getItem(\"csrfToken\")\n\nexport async function login(data: UserLogin) {\n    const response = await fetch(\"http://localhost:8080/auth/login\", { body: JSON.stringify(data), credentials: \"include\", method: \"POST\", headers: {\n            \"Content-Type\": \"application/json\",\n        }})\n\n    if(response.status !== 200) {\n        throw new Error(\"Not logged in\");\n    }\n\n    return response.json();\n}\n\nexport async function getCurrentUser(): Promise<any> {\n    const response = await fetch(\"http://localhost:8080/auth/user\", { credentials: \"include\" });\n\n    if(response.status !== 200) {\n        throw new Error(\"Not logged in\");\n    }\n    return response.json();\n}\n\nexport async function logout(): Promise<Response> {\n    return await fetch(\"http://localhost:8080/logout\", {credentials: \"include\"})\n}\n"],"mappings":"AAEA,MAAMA,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;AAEnD,OAAO,eAAeC,KAAK,CAACC,IAAe,EAAE;EACzC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,kCAAkC,EAAE;IAAEC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC;IAAEM,WAAW,EAAE,SAAS;IAAEC,MAAM,EAAE,MAAM;IAAEC,OAAO,EAAE;MACxI,cAAc,EAAE;IACpB;EAAC,CAAC,CAAC;EAEP,IAAGP,QAAQ,CAACQ,MAAM,KAAK,GAAG,EAAE;IACxB,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;EACpC;EAEA,OAAOT,QAAQ,CAACU,IAAI,EAAE;AAC1B;AAEA,OAAO,eAAeC,cAAc,GAAiB;EACjD,MAAMX,QAAQ,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAE;IAAEI,WAAW,EAAE;EAAU,CAAC,CAAC;EAE3F,IAAGL,QAAQ,CAACQ,MAAM,KAAK,GAAG,EAAE;IACxB,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;EACpC;EACA,OAAOT,QAAQ,CAACU,IAAI,EAAE;AAC1B;AAEA,OAAO,eAAeE,MAAM,GAAsB;EAC9C,OAAO,MAAMX,KAAK,CAAC,8BAA8B,EAAE;IAACI,WAAW,EAAE;EAAS,CAAC,CAAC;AAChF"},"metadata":{},"sourceType":"module","externalDependencies":[]}